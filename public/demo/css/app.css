/* ========================================
   MDT ERP - Main Stylesheet
   Siam Plaswood - Modern Trade Management
   ======================================== */

*, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }

:root {
    --primary: #1e3a5f;
    --primary-light: #2d5a8e;
    --primary-dark: #0f1f33;
    --accent: #f59e0b;
    --accent-light: #fbbf24;
    --success: #22c55e;
    --danger: #ef4444;
    --warning: #f59e0b;
    --info: #3b82f6;
    --gray-50: #f9fafb;
    --gray-100: #f3f4f6;
    --gray-200: #e5e7eb;
    --gray-300: #d1d5db;
    --gray-400: #9ca3af;
    --gray-500: #6b7280;
    --gray-600: #4b5563;
    --gray-700: #374151;
    --gray-800: #1f2937;
    --gray-900: #111827;
    --sidebar-w: 260px;
    --topbar-h: 56px;
    --rolebar-h: 44px;
    --radius: 10px;
    --shadow: 0 1px 3px rgba(0,0,0,0.1);
    --shadow-lg: 0 4px 20px rgba(0,0,0,0.12);
}

body {
    font-family: 'Sarabun', sans-serif;
    background: var(--gray-100);
    color: var(--gray-800);
    line-height: 1.6;
    font-size: 14px;
    overflow-x: hidden;
}

/* ===== ROLE BAR ===== */
.role-bar {
    position: fixed; top:0; left:0; right:0; z-index:1000;
    height: var(--rolebar-h);
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
    display: flex; align-items: center; justify-content: space-between;
    padding: 0 16px;
    border-bottom: 2px solid var(--accent);
}
.role-bar-brand { color: var(--accent); font-weight:700; font-size:14px; display:flex; align-items:center; gap:8px; }
.role-bar-brand i { margin-right:6px; }
.role-bar-version {
    font-size:10px; font-weight:600; color:var(--gray-400);
    background:rgba(255,255,255,0.08); padding:2px 8px;
    border-radius:10px; border:1px solid rgba(255,255,255,0.1);
}
.role-bar-switches { display:flex; align-items:center; gap:6px; }
.role-bar-license {
    color:var(--gray-400); font-size:11px; font-weight:600;
    display:flex; align-items:center; gap:5px; white-space:nowrap;
}
.role-bar-license i { color:var(--accent); font-size:10px; }
.role-bar-label { color:var(--gray-400); font-size:12px; margin-right:4px; }
.role-btn {
    padding: 4px 12px; border:1px solid var(--gray-600); border-radius:20px;
    background:transparent; color:var(--gray-400); font-family:inherit;
    font-size:12px; cursor:pointer; transition:all .2s;
    display:flex; align-items:center; gap:4px;
}
.role-btn:hover { border-color:var(--accent); color:var(--accent); }
.role-btn.active {
    background:var(--accent); color:#000; border-color:var(--accent);
    font-weight:600;
}

/* ===== SIDEBAR ===== */
.sidebar {
    position:fixed; left:0; top:var(--rolebar-h); bottom:0;
    width:var(--sidebar-w); background:var(--primary-dark);
    color:white; z-index:100; display:flex; flex-direction:column;
    transition: transform .3s;
}
.sidebar.collapsed { transform: translateX(-100%); }
.sidebar-header {
    padding:20px 16px 16px; display:flex; align-items:center; gap:12px;
    border-bottom:1px solid rgba(255,255,255,0.1);
}
.sidebar-logo { width:40px; height:40px; border-radius:8px; }
.sidebar-brand { font-weight:700; font-size:16px; }
.sidebar-sub { font-size:11px; color:var(--gray-400); }
.sidebar-nav { flex:1; overflow-y:auto; padding:8px 0; }
.sidebar-nav::-webkit-scrollbar { width:4px; }
.sidebar-nav::-webkit-scrollbar-thumb { background:rgba(255,255,255,0.2); border-radius:2px; }

.nav-group-label {
    padding:12px 20px 4px; font-size:10px; text-transform:uppercase;
    letter-spacing:1.5px; color:var(--gray-500); font-weight:600;
}
.nav-item {
    display:flex; align-items:center; gap:12px;
    padding:10px 20px; cursor:pointer; transition:all .15s;
    color:var(--gray-300); text-decoration:none; font-size:14px;
    border-left:3px solid transparent; position:relative;
}
.nav-item:hover { background:rgba(255,255,255,0.05); color:white; }
.nav-item.active {
    background: rgba(245,158,11,0.1); color:var(--accent);
    border-left-color:var(--accent); font-weight:600;
}
.nav-item i { width:20px; text-align:center; font-size:15px; }
.nav-item .nav-badge {
    position:absolute; right:16px;
    background:var(--danger); color:white;
    font-size:10px; font-weight:700; padding:1px 6px;
    border-radius:10px; min-width:18px; text-align:center;
}

.sidebar-footer {
    padding:12px 16px; border-top:1px solid rgba(255,255,255,0.1);
    flex-shrink:0; overflow:hidden;
}
.sidebar-user { display:flex; align-items:center; gap:10px; }
.user-avatar {
    width:36px; height:36px; border-radius:50%;
    background:var(--accent); color:#000; font-weight:700;
    display:flex; align-items:center; justify-content:center; font-size:13px;
}
.user-name { font-weight:600; font-size:13px; }
.user-role { font-size:11px; color:var(--gray-400); }

/* ===== MAIN CONTENT ===== */
.main-content {
    margin-left:var(--sidebar-w); margin-top:var(--rolebar-h);
    min-height:calc(100vh - var(--rolebar-h));
    transition: margin-left .3s;
}
.main-content.expanded { margin-left:0; }

.top-bar {
    height:var(--topbar-h); background:white;
    display:flex; align-items:center; justify-content:space-between;
    padding:0 24px; border-bottom:1px solid var(--gray-200);
    position:sticky; top:var(--rolebar-h); z-index:50;
}
.top-bar-left { display:flex; align-items:center; gap:12px; }
.menu-toggle {
    display:none; background:none; border:none;
    font-size:18px; cursor:pointer; color:var(--gray-600);
    padding:4px;
}
.page-title { font-size:18px; font-weight:700; color:var(--gray-800); }
.top-bar-right { display:flex; align-items:center; gap:12px; }
.top-btn {
    position:relative; background:none; border:none;
    font-size:16px; cursor:pointer; color:var(--gray-500);
    padding:6px; border-radius:8px; transition:all .15s;
}
.top-btn:hover { background:var(--gray-100); color:var(--primary); }
.badge {
    position:absolute; top:0; right:0;
    background:var(--danger); color:white;
    font-size:9px; font-weight:700; padding:1px 4px;
    border-radius:8px; min-width:14px; text-align:center;
}
.top-date { font-size:13px; color:var(--gray-500); }

.content-area { padding:20px 24px 40px; }

/* ===== STAT CARDS ===== */
.stats-grid {
    display:grid; gap:16px;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    margin-bottom:24px;
}
.stat-card {
    background:white; border-radius:var(--radius); padding:20px;
    box-shadow:var(--shadow); display:flex; align-items:center; gap:16px;
    transition: transform .15s, box-shadow .15s; cursor:default;
}
.stat-card:hover { transform:translateY(-2px); box-shadow:var(--shadow-lg); }
.stat-icon {
    width:48px; height:48px; border-radius:12px;
    display:flex; align-items:center; justify-content:center;
    font-size:20px; color:white; flex-shrink:0;
}
.stat-value { font-size:24px; font-weight:700; line-height:1.2; }
.stat-label { font-size:12px; color:var(--gray-500); }
.stat-change { font-size:11px; font-weight:600; }
.stat-change.up { color:var(--success); }
.stat-change.down { color:var(--danger); }

/* ===== CARDS ===== */
.card {
    background:white; border-radius:var(--radius);
    box-shadow:var(--shadow); margin-bottom:20px; overflow:hidden;
}
.card-header {
    padding:16px 20px; border-bottom:1px solid var(--gray-100);
    display:flex; align-items:center; justify-content:space-between;
}
.card-header h3 { font-size:15px; font-weight:700; }
.card-body { padding:20px; }
.card-footer { padding:12px 20px; border-top:1px solid var(--gray-100); }

/* ===== TABLES ===== */
.table-wrap { overflow-x:auto; }
table.data-table {
    width:100%; border-collapse:collapse; font-size:13px;
}
table.data-table th {
    background:var(--gray-50); padding:10px 12px;
    text-align:left; font-weight:600; color:var(--gray-600);
    border-bottom:2px solid var(--gray-200); white-space:nowrap;
    font-size:12px; text-transform:uppercase; letter-spacing:.5px;
}
table.data-table td {
    padding:10px 12px; border-bottom:1px solid var(--gray-100);
    vertical-align:middle;
}
table.data-table tr:hover td { background:var(--gray-50); }

/* ===== BADGES / TAGS ===== */
.tag {
    display:inline-flex; align-items:center; gap:4px;
    padding:3px 10px; border-radius:20px; font-size:11px;
    font-weight:600; white-space:nowrap;
}
.tag-success { background:#dcfce7; color:#15803d; }
.tag-danger { background:#fef2f2; color:#dc2626; }
.tag-warning { background:#fef9c3; color:#a16207; }
.tag-info { background:#dbeafe; color:#2563eb; }
.tag-gray { background:var(--gray-100); color:var(--gray-600); }
.tag-primary { background:#e0e7ff; color:#4338ca; }
.tag-purple { background:#f3e8ff; color:#7c3aed; }

/* ===== BUTTONS ===== */
.btn {
    display:inline-flex; align-items:center; gap:6px;
    padding:8px 16px; border-radius:8px; font-family:inherit;
    font-size:13px; font-weight:600; cursor:pointer;
    border:none; transition:all .15s; text-decoration:none;
}
.btn-primary { background:var(--primary); color:white; }
.btn-primary:hover { background:var(--primary-light); }
.btn-accent { background:var(--accent); color:#000; }
.btn-accent:hover { background:var(--accent-light); }
.btn-success { background:var(--success); color:white; }
.btn-danger { background:var(--danger); color:white; }
.btn-outline { background:white; border:1px solid var(--gray-300); color:var(--gray-700); }
.btn-outline:hover { border-color:var(--primary); color:var(--primary); }
.btn-sm { padding:5px 10px; font-size:12px; }
.btn-lg { padding:12px 24px; font-size:15px; }
.btn-icon { width:32px; height:32px; padding:0; justify-content:center; border-radius:8px; }

/* ===== FORMS ===== */
.form-group { margin-bottom:16px; }
.form-label { display:block; font-size:13px; font-weight:600; color:var(--gray-700); margin-bottom:4px; }
.form-control {
    width:100%; padding:8px 12px; border:1px solid var(--gray-300);
    border-radius:8px; font-family:inherit; font-size:14px;
    transition:border-color .15s; background:white; color:var(--gray-800);
}
.form-control:focus { outline:none; border-color:var(--primary); box-shadow:0 0 0 3px rgba(30,58,95,0.1); }
select.form-control { cursor:pointer; }
textarea.form-control { min-height:80px; resize:vertical; }

.form-row { display:flex; gap:12px; flex-wrap:wrap; }
.form-row .form-group { flex:1; min-width:160px; }

/* Filter bar */
.filter-bar {
    display:flex; gap:10px; align-items:end; flex-wrap:wrap;
    background:white; padding:16px 20px; border-radius:var(--radius);
    box-shadow:var(--shadow); margin-bottom:20px;
}
.filter-bar .form-group { margin-bottom:0; }

/* ===== PROGRESS BAR ===== */
.progress { height:8px; background:var(--gray-200); border-radius:4px; overflow:hidden; }
.progress-bar { height:100%; border-radius:4px; transition:width .3s; }
.progress-bar.green { background:var(--success); }
.progress-bar.blue { background:var(--info); }
.progress-bar.amber { background:var(--accent); }
.progress-bar.red { background:var(--danger); }

/* ===== GRID ===== */
.grid-2 { display:grid; grid-template-columns:1fr 1fr; gap:20px; }
.grid-3 { display:grid; grid-template-columns:repeat(3,1fr); gap:20px; }
.grid-4 { display:grid; grid-template-columns:repeat(4,1fr); gap:20px; }

/* ===== WORKFLOW CARDS ===== */
.wf-card {
    background:white; border-radius:var(--radius); padding:16px;
    box-shadow:var(--shadow); border-left:4px solid var(--gray-300);
    cursor:pointer; transition:all .15s;
}
.wf-card:hover { box-shadow:var(--shadow-lg); transform:translateY(-1px); }
.wf-card.type-task { border-left-color:var(--info); }
.wf-card.type-problem { border-left-color:var(--danger); }
.wf-card.type-promo { border-left-color:var(--accent); }
.wf-card.type-project { border-left-color:var(--success); }
.wf-card.type-cross { border-left-color:var(--primary); }
.wf-title { font-weight:700; font-size:14px; margin-bottom:6px; }
.wf-desc { font-size:12px; color:var(--gray-500); margin-bottom:10px; }
.wf-meta { display:flex; gap:12px; flex-wrap:wrap; font-size:11px; color:var(--gray-500); }
.wf-meta span { display:flex; align-items:center; gap:4px; }

/* ===== NOTIFICATION ===== */
.notif-overlay {
    display:none; position:fixed; inset:0; background:rgba(0,0,0,0.4);
    z-index:2000; justify-content:flex-end;
}
.notif-overlay.show { display:flex; }
.notif-panel {
    width:380px; max-width:100vw; background:white; height:100%;
    box-shadow:-4px 0 20px rgba(0,0,0,0.15); display:flex; flex-direction:column;
}
.notif-header {
    padding:16px 20px; display:flex; justify-content:space-between;
    align-items:center; border-bottom:1px solid var(--gray-200);
}
.notif-header h3 { font-size:16px; }
.notif-header button { background:none; border:none; font-size:24px; cursor:pointer; color:var(--gray-400); }
.notif-list { flex:1; overflow-y:auto; }
.notif-item {
    display:flex; gap:12px; padding:14px 20px;
    border-bottom:1px solid var(--gray-100); transition:background .15s;
}
.notif-item:hover { background:var(--gray-50); }
.notif-item.unread { background:#fffbeb; }
.notif-icon {
    width:36px; height:36px; border-radius:50%;
    display:flex; align-items:center; justify-content:center;
    color:white; font-size:14px; flex-shrink:0;
}
.notif-item p { font-size:12px; color:var(--gray-500); margin-top:2px; }
.notif-item strong { font-size:13px; }
.notif-time { font-size:11px; color:var(--gray-400); }

/* ===== TOAST ===== */
.toast {
    position:fixed; bottom:24px; left:50%; transform:translateX(-50%) translateY(60px);
    background:var(--gray-800); color:white; padding:10px 24px;
    border-radius:8px; font-size:13px; font-weight:600; z-index:3000;
    opacity:0; transition:all .3s;
}
.toast.show { opacity:1; transform:translateX(-50%) translateY(0); }

/* ===== MODAL ===== */
.modal-overlay {
    display:none; position:fixed; inset:0; background:rgba(0,0,0,0.5);
    z-index:2000; align-items:center; justify-content:center; padding:20px;
}
.modal-overlay.show { display:flex; }
.modal {
    background:white; border-radius:12px; width:600px; max-width:100%;
    max-height:90vh; overflow-y:auto; box-shadow:var(--shadow-lg);
}
.modal-header {
    padding:16px 24px; border-bottom:1px solid var(--gray-200);
    display:flex; justify-content:space-between; align-items:center;
}
.modal-header h3 { font-size:16px; font-weight:700; }
.modal-close { background:none; border:none; font-size:22px; cursor:pointer; color:var(--gray-400); }
.modal-body { padding:24px; }
.modal-footer { padding:16px 24px; border-top:1px solid var(--gray-200); display:flex; gap:8px; justify-content:flex-end; }

/* ===== TIMELINE ===== */
.timeline { position:relative; padding-left:24px; }
.timeline::before {
    content:''; position:absolute; left:8px; top:0; bottom:0;
    width:2px; background:var(--gray-200);
}
.timeline-item { position:relative; padding-bottom:20px; }
.timeline-dot {
    position:absolute; left:-20px; top:4px;
    width:12px; height:12px; border-radius:50%;
    background:var(--primary); border:2px solid white;
    box-shadow:0 0 0 2px var(--primary);
}
.timeline-dot.done { background:var(--success); box-shadow:0 0 0 2px var(--success); }
.timeline-dot.active { background:var(--accent); box-shadow:0 0 0 2px var(--accent); }
.timeline-date { font-size:11px; color:var(--gray-400); }
.timeline-content { font-size:13px; margin-top:2px; }

/* ===== EMPTY STATE ===== */
.empty-state {
    text-align:center; padding:60px 20px; color:var(--gray-400);
}
.empty-state i { font-size:48px; margin-bottom:12px; }
.empty-state p { font-size:14px; }

/* ===== PHOTO GRID ===== */
.photo-grid { display:flex; gap:8px; flex-wrap:wrap; }
.photo-thumb {
    width:80px; height:80px; border-radius:8px; object-fit:cover;
    border:2px solid var(--gray-200); cursor:pointer;
}

/* ===== CHAT ===== */
.chat-box { max-height:400px; overflow-y:auto; padding:12px; }
.chat-msg { display:flex; gap:8px; margin-bottom:12px; }
.chat-msg.mine { flex-direction:row-reverse; }
.chat-bubble {
    max-width:70%; padding:10px 14px; border-radius:12px;
    font-size:13px; line-height:1.5;
}
.chat-msg:not(.mine) .chat-bubble { background:var(--gray-100); }
.chat-msg.mine .chat-bubble { background:var(--primary); color:white; }
.chat-input-area {
    display:flex; gap:8px; padding:12px; border-top:1px solid var(--gray-200);
}
.chat-input-area input { flex:1; }

/* ===== AI ASSISTANT ===== */
.ai-container { max-width:800px; margin:0 auto; }
.ai-header { text-align:center; padding:20px 0; }
.ai-header h2 { font-size:22px; margin-bottom:4px; }
.ai-header p { color:var(--gray-500); }
.ai-suggestions { display:flex; gap:8px; flex-wrap:wrap; justify-content:center; margin:16px 0; }
.ai-suggest-btn {
    padding:8px 16px; border:1px solid var(--gray-200); border-radius:20px;
    background:white; cursor:pointer; font-family:inherit; font-size:12px;
    color:var(--gray-600); transition:all .15s;
}
.ai-suggest-btn:hover { border-color:var(--primary); color:var(--primary); background:var(--gray-50); }

/* ===== SETTINGS NAV ===== */
.settings-nav { display:flex; flex-direction:column; gap:2px; }
.settings-nav-item {
    display:flex; align-items:center; gap:8px;
    padding:8px 12px; border-radius:8px; cursor:pointer;
    font-size:13px; color:var(--gray-600); transition:all .15s;
    text-decoration:none; border:none; background:none; font-family:inherit;
}
.settings-nav-item:hover { background:var(--gray-100); color:var(--gray-800); }
.settings-nav-item.active { background:var(--primary); color:white; font-weight:600; }
.settings-nav-item i { width:16px; text-align:center; font-size:13px; }

/* ===== RESPONSIVE ===== */
@media (max-width:1024px) {
    .grid-4 { grid-template-columns:repeat(2,1fr); }
    .grid-3 { grid-template-columns:repeat(2,1fr); }
}
@media (max-width:768px) {
    .sidebar { transform:translateX(-100%); }
    .sidebar.mobile-open { transform:translateX(0); }
    .main-content { margin-left:0 !important; }
    .menu-toggle { display:block; }
    .role-bar-switches { overflow-x:auto; }
    .role-btn { font-size:11px; padding:3px 8px; white-space:nowrap; }
    .stats-grid { grid-template-columns:repeat(2,1fr); }
    .grid-2, .grid-3, .grid-4 { grid-template-columns:1fr; }
    .content-area { padding:16px; }
    .filter-bar { flex-direction:column; }
    .notif-panel { width:100vw; }
    /* Settings: stack nav + content */
    #contentArea > div[style*="grid-template-columns:220px"] {
        grid-template-columns:1fr !important;
    }
    /* AI: stack chat + sidebar */
    #contentArea > div[style*="grid-template-columns:1fr 320px"] {
        grid-template-columns:1fr !important;
        height:auto !important;
    }
}
@media (max-width:480px) {
    .stats-grid { grid-template-columns:1fr; }
    .role-bar { padding:0 8px; }
    .role-bar-license { display:none; }
    .role-bar-version { display:none; }
}
